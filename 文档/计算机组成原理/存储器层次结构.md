#### **1. 存储器的分类**

- **按存取方式分类**
  1. 随机存取存储器（RAM）
     - 随机访问，读写速度快。
     - 常见类型：静态RAM（SRAM）和动态RAM（DRAM）。
  2. 只读存储器（ROM）
     - 数据不可更改或只能有限更改。
     - 常见类型：EPROM、EEPROM、Flash存储。
  3. 顺序存取存储器
     - 按序读写，例如磁带。
- **按存储介质分类**
  1. **半导体存储器**：如RAM、ROM。
  2. **磁性存储器**：如硬盘、磁带。
  3. **光学存储器**：如光盘（CD/DVD）。
- **按功能分类**
  1. **主存储器**：直接与CPU交互，存储正在执行的程序和数据。
  2. **辅助存储器**：如硬盘，用于长期保存数据。
  3. **高速缓存（Cache）**：CPU与主存之间的缓冲区。
  4. **寄存器**：位于CPU内部，速度最快但容量小。

------

#### **2. 主存储器**

- **主存的组成**
  - 存储单元：存储数据的基本单位，每个单元有一个唯一地址。
  - 存储字：主存的一次存取操作所能读取或写入的位数。
- **动态RAM（DRAM）**
  - 存储原理：利用电容存储数据，需周期性刷新。
  - 优点：容量大，成本低。
  - 缺点：速度较慢。
- **静态RAM（SRAM）**
  - 存储原理：利用触发器存储数据，无需刷新。
  - 优点：速度快。
  - 缺点：容量小，成本高。
- **主存性能参数**
  - 存取时间：从发出请求到完成存取所需的时间。
  - 带宽：单位时间内可以传输的数据量。

------

#### **3. 高速缓存（Cache）**

- **Cache的作用**
   解决CPU与主存之间的速度差异问题，提高系统整体性能。
- **Cache的工作原理**
  - 局部性原理：
    1. **时间局部性**：近期访问的数据很可能被再次访问。
    2. **空间局部性**：临近的数据很可能被访问。
  - 数据块（Cache line）：Cache按块（通常是多个字）存储数据。
- **Cache的结构**
  1. **直接映射**：每块主存数据映射到Cache中唯一位置。
  2. **全相联映射**：任意主存块可以加载到Cache中任意位置。
  3. **组相联映射**：结合直接映射和全相联映射的优点。
- **Cache的替换算法**
  1. **FIFO（先进先出）**：最先进入的块被替换。
  2. **LRU（最近最少使用）**：最久未被访问的块被替换。
  3. **随机替换**：随机选择一块进行替换。

------

#### **4. 虚拟存储器**

- **虚拟存储的概念**
  - 通过地址映射技术，使用部分主存加辅助存储器实现一个“看起来很大”的存储空间。
  - 用户可以使用比实际主存更大的地址空间。
- **分页和分段**
  1. 分页
     - 将程序和内存划分为大小相同的页面和页框。
     - 页表（Page Table）用于存储页面与物理内存的映射关系。
  2. 分段
     - 按照程序逻辑功能划分段（如代码段、数据段）。
     - 每段具有长度和起始地址。
- **页面置换算法**
  1. **FIFO**：替换最早加载的页面。
  2. **LRU**：替换最近最少使用的页面。
  3. **OPT（最佳算法）**：替换将来最久不被使用的页面（理论最优）。

------

#### **5. 存储器层次结构**

现代计算机存储器通常呈现多层次结构，从容量到速度逐渐递减：

1. **寄存器**：CPU内部存储器，速度最快，容量最小。
2. **高速缓存（Cache）**：比主存速度快，但比寄存器慢。
3. **主存（RAM）**：容量大，但速度低于Cache。
4. **辅助存储器（磁盘、SSD）**：容量最大，速度最慢。

------

#### **6. 存储器的性能优化**

- **Cache优化**
  - 增加Cache层次（如L1、L2、L3）。
  - 改进替换策略。
  - 增大Cache容量和块大小。
- **主存优化**
  - 使用更快的存储技术（如DDR4、DDR5）。
  - 使用并行通道增加内存带宽。
- **虚拟存储优化**
  - 减少缺页率（Page Fault）。
  - 提高磁盘I/O效率（如采用SSD）。

------

#### **7. 实例分析**

- Cache的应用实例

  - CPU访问主存的加速：假设主存访问时间为100ns，Cache访问时间为10ns，当Cache命中率为90%时，平均访问时间计算为： 
    $$
    平均访问时间=命中率×Cache访问时间+未命中率×主存访问时间\text{平均访问时间} = \text{命中率} \times \text{Cache访问时间} + \text{未命中率} \times \text{主存访问时间}
    $$

即：
$$
0.9×10+0.1×100=19 ns0.9 \times 10 + 0.1 \times 100 = 19 \, \text{ns}
$$
